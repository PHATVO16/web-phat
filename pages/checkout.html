<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thanh toán - Nhà Thuốc Long Châu UTH</title>

    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../assets/css/pharmacy-theme.css" />
    <link rel="stylesheet" href="../assets/css/style.css" />

    <style>
      .checkout-section {
        background-color: white;
        border-radius: 12px;
        padding: 2rem;
        margin-bottom: 1.5rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .payment-method {
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        padding: 1rem;
        margin-bottom: 1rem;
        cursor: pointer;
        transition: all 0.2s;
      }

      .payment-method:hover {
        border-color: var(--primary-color);
      }

      .payment-method.active {
        border-color: var(--primary-color);
        background-color: var(--primary-light);
      }

      .payment-method input[type="radio"] {
        margin-right: 0.5rem;
      }

      .order-item {
        padding: 1rem 0;
        border-bottom: 1px solid #e5e7eb;
      }

      .order-item:last-child {
        border-bottom: none;
      }
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-pharmacy">
      <div class="container">
        <a class="navbar-brand" href="../index.html">
          <i class="bi bi-hospital"></i>
          Nhà Thuốc Long Châu UTH
        </a>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="container my-5">
      <!-- Progress Steps -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="d-flex justify-content-center">
            <div class="text-center mx-3">
              <div
                class="rounded-circle bg-success text-white d-inline-flex align-items-center justify-content-center"
                style="width: 40px; height: 40px"
              >
                <i class="bi bi-check"></i>
              </div>
              <p class="mt-2 small">Giỏ hàng</p>
            </div>
            <div
              class="align-self-center"
              style="width: 60px; height: 2px; background: #10b981"
            ></div>
            <div class="text-center mx-3">
              <div
                class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center"
                style="width: 40px; height: 40px"
              >
                2
              </div>
              <p class="mt-2 small fw-bold">Thanh toán</p>
            </div>
            <div
              class="align-self-center"
              style="width: 60px; height: 2px; background: #e5e7eb"
            ></div>
            <div class="text-center mx-3">
              <div
                class="rounded-circle bg-secondary text-white d-inline-flex align-items-center justify-content-center"
                style="width: 40px; height: 40px"
              >
                3
              </div>
              <p class="mt-2 small text-muted">Hoàn tất</p>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <!-- Checkout Form -->
        <div class="col-lg-8">
          <!-- Shipping Information -->
          <div class="checkout-section">
            <h5 class="mb-3">
              <i class="bi bi-geo-alt"></i> Thông tin giao hàng
            </h5>

            <form id="checkoutForm">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label"
                    >Họ và tên <span class="text-danger">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="fullName"
                    required
                  />
                </div>

                <div class="col-md-6 mb-3">
                  <label class="form-label"
                    >Số điện thoại <span class="text-danger">*</span></label
                  >
                  <input type="tel" class="form-control" id="phone" required />
                </div>

                <div class="col-12 mb-3">
                  <label class="form-label">Email</label>
                  <input type="email" class="form-control" id="email" />
                </div>

                <div class="col-12 mb-3">
                  <label class="form-label"
                    >Địa chỉ giao hàng <span class="text-danger">*</span></label
                  >
                  <textarea
                    class="form-control"
                    id="address"
                    rows="3"
                    required
                  ></textarea>
                </div>

                <div class="col-12 mb-3">
                  <label class="form-label">Ghi chú đơn hàng (tùy chọn)</label>
                  <textarea class="form-control" id="notes" rows="2"></textarea>
                </div>
              </div>
            </form>
          </div>

          <!-- Payment Method -->
          <div class="checkout-section">
            <h5 class="mb-3">
              <i class="bi bi-credit-card"></i> Phương thức thanh toán
            </h5>

            <div
              class="payment-method active"
              onclick="selectPaymentMethod('cod', this)"
            >
              <input type="radio" name="payment" value="cod" checked />
              <strong
                ><i class="bi bi-cash"></i> Thanh toán khi nhận hàng
                (COD)</strong
              >
              <p class="text-muted small mb-0 mt-2">
                Thanh toán bằng tiền mặt khi nhận hàng
              </p>
            </div>

            <div
              class="payment-method"
              onclick="selectPaymentMethod('bank_transfer', this)"
            >
              <input type="radio" name="payment" value="bank_transfer" />
              <strong><i class="bi bi-bank"></i> Chuyển khoản ngân hàng</strong>
              <p class="text-muted small mb-0 mt-2">
                Chuyển khoản qua Vietcombank, VietinBank, BIDV
              </p>
            </div>

            <div
              class="payment-method"
              onclick="selectPaymentMethod('momo', this)"
            >
              <input type="radio" name="payment" value="momo" />
              <strong><i class="bi bi-wallet2"></i> Ví MoMo</strong>
              <p class="text-muted small mb-0 mt-2">
                Thanh toán qua ví điện tử MoMo
              </p>
            </div>

            <div
              class="payment-method"
              onclick="selectPaymentMethod('credit_card', this)"
            >
              <input type="radio" name="payment" value="credit_card" />
              <strong
                ><i class="bi bi-credit-card-2-front"></i> Thẻ tín dụng/ghi
                nợ</strong
              >
              <p class="text-muted small mb-0 mt-2">
                Visa, Mastercard, JCB, American Express
              </p>
            </div>
          </div>
        </div>

        <!-- Order Summary -->
        <div class="col-lg-4">
          <div class="checkout-section" style="position: sticky; top: 20px">
            <h5 class="mb-3">Đơn hàng của bạn</h5>

            <div id="orderItemsList">
              <!-- Order items will be loaded here -->
            </div>

            <hr />

            <div class="d-flex justify-content-between mb-2">
              <span>Tạm tính:</span>
              <span id="summarySubtotal">0₫</span>
            </div>

            <div class="d-flex justify-content-between mb-2">
              <span>Giảm giá:</span>
              <span class="text-success" id="summaryDiscount">0₫</span>
            </div>

            <div class="d-flex justify-content-between mb-2">
              <span>Phí vận chuyển:</span>
              <span id="summaryShipping">0₫</span>
            </div>

            <hr />

            <div class="d-flex justify-content-between mb-3">
              <strong>Tổng cộng:</strong>
              <strong class="text-danger fs-4" id="summaryTotal">0₫</strong>
            </div>

            <div class="d-grid gap-2">
              <button
                class="btn btn-primary btn-lg"
                onclick="placeOrder()"
                id="placeOrderBtn"
              >
                <i class="bi bi-check-circle"></i> Đặt hàng
              </button>
              <a href="cart.html" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-left"></i> Quay lại giỏ hàng
              </a>
            </div>

            <!-- Security Notice -->
            <div class="alert alert-success mt-3">
              <i class="bi bi-shield-check"></i> Giao dịch được bảo mật và mã
              hóa
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Success Modal -->
    <div class="modal fade" id="successModal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body text-center p-5">
            <div class="mb-4">
              <i
                class="bi bi-check-circle-fill text-success"
                style="font-size: 5rem"
              ></i>
            </div>
            <h4 class="mb-3">Đặt hàng thành công!</h4>
            <p class="text-muted">
              Cảm ơn bạn đã mua hàng. Chúng tôi sẽ liên hệ với bạn sớm nhất.
            </p>
            <p class="text-muted">
              Mã đơn hàng: <strong id="orderCode">#DH001</strong>
            </p>
            <div class="d-grid gap-2 mt-4">
              <a href="my-orders.html" class="btn btn-primary">
                <i class="bi bi-box-seam"></i> Xem đơn hàng
              </a>
              <a href="../index.html" class="btn btn-outline-secondary">
                <i class="bi bi-house"></i> Về trang chủ
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JS -->
    <script src="../assets/js/api.js"></script>
    <script src="../assets/js/checkout.js"></script>
  </body>
</html>
